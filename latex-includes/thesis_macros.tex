% for header page
\newcommand{\vs}{\vspace{20pt}}

% for header page
\newcommand{\pt}[1]{\MakeUppercase{
    \large{}
    \centering{}
    #1 \\
    \vs{}
  }}

% allow custom lexer for pygmentize
% https://github.com/gpoore/minted/issues/176#issuecomment-695344998
\usepackage{minted}
\usepackage{regexpatch}

\makeatletter
\newcommand{\minted@def@optcl@novalue}[2]{%
  \define@key{minted@opt@g}{#1}[]{%
    \minted@addto@optlistcl{\minted@optlistcl@g}{#2}%
    \@namedef{minted@opt@g:#1}{#2}}%
  \define@key{minted@opt@g@i}{#1}[]{%
    \minted@addto@optlistcl{\minted@optlistcl@g@i}{#2}%
    \@namedef{minted@opt@g@i:#1}{#2}}%
  \define@key{minted@opt@lang}{#1}[]{%
    \minted@addto@optlistcl@lang{minted@optlistcl@lang\minted@lang}{#2}%
    \@namedef{minted@opt@lang\minted@lang:#1}{#2}}%
  \define@key{minted@opt@lang@i}{#1}[]{%
    \minted@addto@optlistcl@lang{%
      minted@optlistcl@lang\minted@lang @i}{#2}%
    \@namedef{minted@opt@lang\minted@lang @i:#1}{#2}}%
  \define@key{minted@opt@cmd}{#1}[]{%
    \minted@addto@optlistcl{\minted@optlistcl@cmd}{#2}%
    \@namedef{minted@opt@cmd:#1}{#2}}%
}

% new minted option "custom" for adding command line option "-x"
\minted@def@optcl@novalue{custom}{-x}

% new minted option "formatter=<formatter>" for specifying pygments formatter
\minted@def@opt{formatter}

% apply "-f <formatter>"
\newcommand\minted@formatter{%
  \minted@get@opt{formatter}{latex}\space
}

% Note: may require fix to regexpatch:
% https://tex.stackexchange.com/questions/578518/regexpatchcmd-failing-with-latex2e-2020-10-01-patch-level-4-use-cs-replacemen#comment1469403_578518
\xpatchcmd*\minted@checkstyle
  {-f latex }
  {-f \minted@formatter}
  {}{\fail}
\xpatchcmd*\minted@pygmentize
  {-f latex }
  {-f \minted@formatter}
  {}{\fail}

  \makeatother
  % end custom lexer for pygmatize

% Need VerbatimEnvironment:
% https://tex.stackexchange.com/a/400115
\newenvironment{hminted}
{\VerbatimEnvironment
\begin{minted}[escapeinside=//,frame=single,custom]{../latex-includes/hazel_lexer.py:HazelLexer}}
{\end{minted}}

% hazel inline; don't really know what's going on here
% https://tex.stackexchange.com/a/181393
\newcommand{\hmintinlinet}{
  \mintinline[escapeinside=//,frame=single,custom]{../latex-includes/hazel_lexer.py:HazelLexer}
}
\newcommand{\hmintinline}[1]{\expandafter\hmintinlinet\expandafter{#1}}

% \newcommand{\ab}{expanded stuff}
% \newcommand{\pythoninline}{\mintinline[]{python}}

% hazel inputminted
\newcommand{\inputhminted}[1]{\inputminted[escapeinside=//,frame=single,custom]{../latex-includes/hazel_lexer.py:HazelLexer}{lstings/#1.hz}}

% ocaml inputminted
\newcommand{\inputominted}[1]{\inputminted[escapeinside=//,frame=single]{ocaml}{lstings/#1.ml}}


% extra math operators
% especially for math operators that are introduced in this paper, want to
% declare them here so they are easily changeable
\DeclareMathOperator{\fix}{fix}       % fixpoint
\newcommand{\env}{\sigma}             % environment
\newcommand{\pp}{\Uparrow}            % post-process
\newcommand{\pplc}{\pp_{[]}}          % post-process lambda conversion (substitution) operator
\newcommand{\pplco}{\pp_{[],1}}       % post-process lc part 1
\newcommand{\pplct}{\pp_{[],2}}       % post-process lc part 2
\newcommand{\ppn}{\pp_{i}}            % post-process hole closure numbering
\newcommand{\ppnd}{\pp_{i,d}}         % post-process hole closure numbering (results only)
\newcommand{\ppns}{\pp_{i,\env}}      % post-process hole closure numbering (sigmas only)
\newcommand{\pplcl}{PPI$_{[]}$}       % post-process lambda within evaluation boundary conversion label
\newcommand{\pplclo}{PPO$_{[]}$}      % post-process lambda outside evaluation boundary conversion label
\newcommand{\ppndl}{PP$_{i,d}$}       % post-process hole closure numbering label
\newcommand{\ppnsl}{PP$_{i,\env}$}     % post-process hole closure numbering label
\newcommand{\pth}{p}                  % path
\newcommand{\hci}{H}                  % hole instance/closure info
\DeclareMathOperator{\hid}{hid}       % hole instance id generator

% for use in Hazel listings
\newcommand{\rar}{$\rightarrow$}
\newcommand{\Rar}{$\Rightarrow$}
\newcommand{\lbd}{$\lambda$}
\newcommand{\heh}[1]{$\hehole^{#1}$}

% for missing references
\newcommand{\todo}[1]{\textbf{[TODO: #1]}}
\newcommand{\todoref}[1]{\textbf{[TODO: need reference(s): #1]}}

% lambda calculi
\newcommand{\ulc}{$\Lambda$}
\newcommand{\stlc}{$\Lambda_\to$}
\newcommand{\gtlc}{$\Lambda_\to^?$}
\newcommand{\gtclc}{$\Lambda_\to^{<\tau>}$}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../thesis/main"
%%% End:
